<!DOCTYPE html>
<html>
<head>
    <title>Results - MBR Automation</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 1000px; margin: 50px auto; padding: 20px; }
        h1 { color: #232f3e; }
        .success { background-color: #d4edda; padding: 20px; border-radius: 8px; border-left: 4px solid #28a745; margin: 20px 0; }
        .content-box { background-color: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0; }
        pre { white-space: pre-wrap; word-wrap: break-word; }
        button, .btn { background-color: #ff9900; color: white; padding: 12px 30px; border: none; border-radius: 4px; cursor: pointer; font-size: 16px; text-decoration: none; display: inline-block; margin: 5px; }
        button:hover, .btn:hover { background-color: #ec7211; }
        .secondary { background-color: #6c757d; }
        .secondary:hover { background-color: #5a6268; }
    </style>
</head>
<body>
    <h1>‚úì Processing Complete</h1>
    
    <div class="success">
        <h3>Your MBR presentation for {{ customer_name }} is ready!</h3>
        <p>The presentation has been tailored with customer-specific context, talking points, and strategic questions.</p>
    </div>
    
    {% if data_sources %}
    <h2>üìä Data Sources Used</h2>
    <div class="content-box">
        <table style="width: 100%; border-collapse: collapse;">
            <tr style="border-bottom: 2px solid #ddd;">
                <th style="text-align: left; padding: 10px;">Data Source</th>
                <th style="text-align: left; padding: 10px;">Status</th>
                <th style="text-align: left; padding: 10px;">Details</th>
            </tr>
            <tr style="border-bottom: 1px solid #eee;">
                <td style="padding: 10px;">Customer Account</td>
                <td style="padding: 10px;">
                    {% if data_sources.customer_account_used %}
                        <span style="color: #28a745;">‚úÖ Connected</span>
                    {% else %}
                        <span style="color: #dc3545;">‚ùå Failed</span>
                    {% endif %}
                </td>
                <td style="padding: 10px; font-size: 0.9em;">
                    {% if data_sources.customer_account_used %}
                        Account: {{ data_sources.customer_account_id }}
                    {% else %}
                        {{ data_sources.error_message }}
                    {% endif %}
                </td>
            </tr>
            <tr style="border-bottom: 1px solid #eee;">
                <td style="padding: 10px;">Cost Explorer</td>
                <td style="padding: 10px;">
                    {% if data_sources.cost_data_real %}
                        <span style="color: #28a745;">‚úÖ Real Data</span>
                    {% else %}
                        <span style="color: #ffc107;">‚ö†Ô∏è Mock Data</span>
                    {% endif %}
                </td>
                <td style="padding: 10px; font-size: 0.9em;">
                    {% if data_sources.cost_data_real %}
                        Total: ${{ data_sources.total_cost }}
                    {% else %}
                        Using sample data
                    {% endif %}
                </td>
            </tr>
            <tr style="border-bottom: 1px solid #eee;">
                <td style="padding: 10px;">Health API</td>
                <td style="padding: 10px;">
                    {% if data_sources.health_data_real %}
                        <span style="color: #28a745;">‚úÖ Real Data</span>
                    {% else %}
                        <span style="color: #ffc107;">‚ö†Ô∏è Mock Data</span>
                    {% endif %}
                </td>
                <td style="padding: 10px; font-size: 0.9em;">
                    {% if not data_sources.health_data_real %}
                        Requires Premium Support
                    {% endif %}
                </td>
            </tr>
            <tr style="border-bottom: 1px solid #eee;">
                <td style="padding: 10px;">Support API</td>
                <td style="padding: 10px;">
                    {% if data_sources.support_data_real %}
                        <span style="color: #28a745;">‚úÖ Real Data</span>
                    {% else %}
                        <span style="color: #ffc107;">‚ö†Ô∏è Mock Data</span>
                    {% endif %}
                </td>
                <td style="padding: 10px; font-size: 0.9em;">
                    {% if not data_sources.support_data_real %}
                        Requires Premium Support
                    {% endif %}
                </td>
            </tr>
            <tr>
                <td style="padding: 10px;">Bedrock AI</td>
                <td style="padding: 10px;">
                    {% if data_sources.ai_used %}
                        <span style="color: #28a745;">‚úÖ Active</span>
                    {% else %}
                        <span style="color: #ffc107;">‚ö†Ô∏è Mock</span>
                    {% endif %}
                </td>
                <td style="padding: 10px; font-size: 0.9em;">
                    {% if data_sources.ai_used %}
                        Model: Claude 3 Haiku
                    {% endif %}
                </td>
            </tr>
        </table>
    </div>
    {% endif %}
    
    <h2>Downloads</h2>
    <a href="/download/{{ presentation_file }}" class="btn">üì• Download Presentation</a>
    
    <h2>Change Summary</h2>
    <div class="content-box">
        <pre>{{ summary }}</pre>
    </div>
    
    <h2>Strategic Questions</h2>
    <div class="content-box">
        <pre>{{ questions }}</pre>
    </div>
    
    <div style="margin-top: 30px;">
        <a href="/reset"><button class="secondary">‚Üê Start New MBR</button></a>
        <a href="/cleanup"><button class="secondary">üóëÔ∏è Cleanup & Start New</button></a>
    </div>
</body>
</html>
